# 标签
 
标签是为了更方便地参考提交而给它标上易懂地名称。

Git 可以使用两种标签：轻标签和注解标签。打上的标签是固定的，不能像分支那样可以移动位置。

* 轻标签
    * 添加名称
* 注解标签
    * 添加名称
    * 添加注解
    * 添加签名

一般情况下，发布标签是采用注解标签来添加注解或签名的。轻标签是为了在本地暂时使用或一次性使用。

tip:你可以指定标签名称以退出，或reset在[修改提交]的讲解，还可以简单的恢复过去特定的状态。

# 操作标签

## 添加轻标签

使用`git tag <tagname>`命令来添加标签，<tagname>为标签名字。

使用`git tag`命令可查看标签列表。

可是使用`git log --decorate`命令查看包含标签资料的历史记录。

## 添加注解标签

使用`git tag -a <tagname>`命令添加注解标签，执行之后会启动编辑区，请输入注解。

使用`git tag -am "这里写注解" annotation`命令添加annotation的标签，并且其注解为“这里写注解”

使用`git tag -n`命令，可以显示标签的列表和注解

## 删除标签

使用`git tag -d <tagname>`命令为删除标签。

# 改写提交

## 修改最近的提交

当出现提交以下需求时，可指定amend 选项执行提交的话，可以修改同一个分支最近的提交内容和注解：

* 添加最近提交时漏掉的档案
* 修改最近提交的注解

## 取消过去的提交

在revert可以取消指定的提交内容。使用后面要提到的rebase -i或reset也可以删除提交。但是，不能随便删除已经发布的提交，这时需要通过revert创建要否定的提交。

主要使用的场合：

* 安全地取消过去发布的提交

## 遗弃提交

在reset可以遗弃不再使用的提交。执行遗弃时，需要根据影响的范围而指定不同的模式，可以指定是否复原索引或工作树的内容。

除了默认的mixed模式，还有soft和hard模式。欲了解受各模式影响的部分，请参照下面的表格：

|模式名称|HEAD的位置|索引|工作树|
|---|---|---|---|
|soft|修改|不修改|不修改|
|mixed|修改|修改|不修改|
|hard|修改|修改|修改|

主要使用的场合：

* 复原修改过的索引的状态(mixed)
* 彻底取消最近的提交(hard)
* 只取消提交(soft)

## 提取提交

在cherry-pick，您可以从其他分支复制指定的提交，然后导入到现在的分支。

主要使用的场合：

* 把弄错分支的提交移动到正确的地方
* 把其他分支的提交添加到现在的分支

## 改写提交的历史记录

在rebase指定i选项，您可以改写、替换、删除或合并提交。

主要使用的场合：

* 在push之前，重新输入正确的提交注解
* 清楚地汇合内容含义相同的提交
* 添加最近提交时漏掉的档案

## 汇合分支上的提交，然后一同合并到分支

merge的特殊选项：squash
用这个选项指定分支的合并，就可以把所有汇合的提交添加到分支上

主要使用的场合：

汇合主题分支的提交，然后合并提交到目标分支。